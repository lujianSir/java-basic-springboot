<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
"http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<!-- namespace： 1. namespace必须和Mapper接口类路径一致 -->
<mapper namespace="com.item.mapper.FileMapper">
	<!-- 2. id必须和Mapper接口方法名一致 -->
	<!-- 3. parameterType必须和接口方法参数类型一致 -->
	<!-- 4. resultType必须和接口方法返回值类型一致 -->


	<!-- 录入文件信息 -->
	<insert id="fileinfoAdd"
		parameterType="com.item.entity.FileBean">
		INSERT INTO fileinfo
		(`catalog`,`fileurl`,`role`,`uploadtime`)
		VALUES
		(#{catalog},#{fileurl},#{role},now())
	</insert>

	<!-- 录入模型信息 -->
	<insert id="modelinfoAdd"
		parameterType="com.item.entity.ModelBean">
		INSERT INTO modelinfo
		(`modelname`,`modelprice`,`buildtype`,`resource_one`,`resource_two`,`filename`,`describe`)
		VALUES
		(#{modelname},#{modelprice},#{buildtype},#{resource_one},#{resource_two},#{filename},#{describe})
	</insert>

	<!-- 根据名字查询 -->
	<select id="fileinfoQuery" parameterType="String"
		resultType="com.item.entity.FileBean">
		select * from fileinfo where fileurl like "%"#{filename}"%"
	</select>

	<!-- 删除文件信息 -->
	<delete id="fileinfoDelete" parameterType="int">
		DELETE FROM fileinfo WHERE id = #{id}
	</delete>
	
	<!-- 查询模型封面下所有的信息 -->
	<select id="webStoreQuery" resultType="com.item.entity.FileBean">
		SELECT * FROM `fileinfo` WHERE catalog = '模型封面'
	</select>

</mapper>